webpackJsonp([2],{"6aXU":function(t,e){},"Kz/o":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("Dd8w"),r=s.n(i),n=s("qwAB"),a=s("y/jF"),o=s("Sgn/"),c=s("0aAL"),u=s("NYxO"),h={mixins:[s("F4+m").a],data:function(){return{singerGroupList:[],shortcutList:[],scrollY:-1,curGroupIndex:0,restDis:-1}},created:function(){this.receiveSingerList(),this.touch={},this.listenScroll=!0,this.distanceList=[],this.probeType=3},computed:{fixedTitle:function(){return this.scrollY>0?"":this.singerGroupList[this.curGroupIndex]?this.singerGroupList[this.curGroupIndex].title:""}},methods:r()({receiveSingerList:function(){var t=this;Object(o.b)().then(function(e){t.singerGroupList=t._normalizeSingerList(e.data.list),t.shortcutList=t._createShortcutList()})},selectItem:function(t){console.log(t),this.$router.push({path:"/singer-page/"+t.id}),this.setSinger(t)},handlePlayList:function(t){var e=t.length>0?"60px":"";this.$refs.singerPage.style.bottom=e,this.$refs.singerList.refresh()},startTouchShortcut:function(t){this.touch.y1=t.touches[0].pageY,this.touch.startIndex=0|t.target.dataset.index;var e=this.touch.startIndex;this.toSingerGroup(e)},moveTouchShortcut:function(t){this.touch.y2=t.touches[0].pageY;var e=document.getElementsByClassName("each_cut")[0].clientHeight,s=(this.touch.y2-this.touch.y1)/e|0,i=this.touch.startIndex+s;this.toSingerGroup(i)},toSingerGroup:function(t){this.curGroupIndex=t,t<0&&(t=0),t>this.shortcutNumbers&&(t=this.shortcutNumbers),this.$refs.singerList.scrollToElement(this.$refs.listGroup[t],0)},adhereGroupTitle:function(t){this.scrollY=t.y},_normalizeSingerList:function(t){var e={hot:{title:"热门",items:[],top:10}};t.forEach(function(t,s){var i=new c.a({name:t.Fsinger_name,id:t.Fsinger_mid}),r=t.Findex;e[r]||(e[r]={title:r,items:[]}),e[r].items.push(i),s<e.hot.top&&e.hot.items.push(i)});var s=[],i=[],r=[];for(var n in e){var a=e[n].title;a.match(/[a-zA-Z]/)?i.push(e[n]):"热门"==a?s.push(e.hot):r.push(e[n])}return i.sort(function(t,e){return t.title.charCodeAt(0)-e.title.charCodeAt(0)}),r.sort(),s.concat(i).concat(r)},_createShortcutList:function(){var t=this.singerGroupList.map(function(t){return t.title.substring(0,1)});return this.shortcutNumbers=t.length-1,t},_createDistanceList:function(){for(var t=this.$refs.listGroup,e=0,s=0;s<t.length;s++)e+=t[s].clientHeight,this.distanceList.push(e)}},Object(u.d)({setSinger:"SET_SINGER"})),watch:{singerGroupList:function(){var t=this;setTimeout(function(){t._createDistanceList()},20)},scrollY:function(t){var e=Math.abs(t),s=void 0;if(t>=0)this.curGroupIndex=0,s=s=this.distanceList[0];else if(e>=this.distanceList[this.distanceList.length-1])this.curGroupIndex=this.distanceList.length-1,s=0;else if(e>=0&&e<this.distanceList[0])this.curGroupIndex=0,s=this.distanceList[0]-e;else for(var i=0;i<this.distanceList.length;i++)if(e>=this.distanceList[i]&&e<this.distanceList[i+1]){this.curGroupIndex=i+1,s=this.distanceList[i+1]-e;break}this.restDis=s;var r=void 0;r=s>0&&s<30?-(30-s):0,this.$refs.fixed.style.transform="translate3d(0,"+r+"px,0)"}},components:{Scroll:n.a,Loading:a.a}},l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"singerPage",staticClass:"singer-page"},[s("scroll",{ref:"singerList",staticClass:"singer-list",attrs:{data:t.singerGroupList,"probe-type":t.probeType,"is-listen-scroll":t.listenScroll},on:{scroll:t.adhereGroupTitle}},[s("ul",t._l(t.singerGroupList,function(e){return s("li",{ref:"listGroup",refInFor:!0,staticClass:"group"},[s("h2",{staticClass:"title"},[t._v(t._s(e.title))]),t._v(" "),s("ul",t._l(e.items,function(e){return s("li",{staticClass:"item",on:{click:function(s){t.selectItem(e)}}},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.avatar,expression:"singer.avatar"}],staticClass:"avatar"}),t._v(" "),s("span",{staticClass:"name"},[t._v(t._s(e.name))])])}))])})),t._v(" "),s("div",{staticClass:"side-shortcut",on:{touchstart:t.startTouchShortcut,touchmove:function(e){e.stopPropagation(),e.preventDefault(),t.moveTouchShortcut(e)}}},[s("ul",t._l(t.shortcutList,function(e,i){return s("li",{staticClass:"item each_cut",class:{current:t.curGroupIndex===i},attrs:{"data-index":i}},[t._v("\n          "+t._s(e)+"\n        ")])}))]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.fixedTitle,expression:"fixedTitle"}],ref:"fixed",staticClass:"top-fixed"},[s("div",{staticClass:"fixed-title"},[t._v(t._s(t.fixedTitle)+" ")])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.singerGroupList.length,expression:"!singerGroupList.length"}],staticClass:"loading-wrapper"},[s("loading")],1)]),t._v(" "),s("router-view")],1)},staticRenderFns:[]};var d=s("VU/8")(h,l,!1,function(t){s("6aXU")},"data-v-d8a3d732",null);e.default=d.exports},"Sgn/":function(t,e,s){"use strict";e.b=function(){var t=r()({},a.c,{channel:"singer",page:"list",key:"all_all_all",pagesize:100,pagenum:1,loginUin:0,hostUin:0,platform:"yqq",needNewCode:0}),e=a.b;return Object(n.a)("https://c.y.qq.com/v8/fcg-bin/v8.fcg",t,e)},e.a=function(t){var e=r()({},a.c,{loginUin:0,hostUin:0,platform:"yqq",needNewCode:"0",singermid:t,order:"listen",begin:0,num:100,songstatus:1}),s=a.b;return Object(n.a)("https://c.y.qq.com/v8/fcg-bin/fcg_v8_singer_track_cp.fcg",e,s)};var i=s("woOf"),r=s.n(i),n=s("Gak4"),a=s("T452")}});
//# sourceMappingURL=2.7ff8d2a59f10c10012ef.js.map