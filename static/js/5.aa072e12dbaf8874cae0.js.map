{"version":3,"sources":["webpack:///src/components/rank-page/rank-page.vue","webpack:///./src/components/rank-page/rank-page.vue?3971","webpack:///./src/components/rank-page/rank-page.vue","webpack:///./src/api/rank.js"],"names":["receiveRankList","methods","extends_default","_this","this","topList","id","top","bottom","refresh","scroll","scroll_scroll","loading","rank_page_rank_page","render","_vm","_h","$createElement","_c","_self","ref","staticClass","attrs","data","rankList","_l","rank","on","click","$event","selectItem","directives","name","rawName","value","expression","width","height","_v","song","index","_s","songname","singername","length","staticRenderFns","Component","__webpack_require__","normalizeComponent","rank_page","ssrContext","__webpack_exports__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default","__WEBPACK_IMPORTED_MODULE_2__config_js__","uin","needNewCode","platform","option","Object","__WEBPACK_IMPORTED_MODULE_1__common_js_jsonp_js__","topid","tpl","page","type"],"mappings":"wOAoCA,gEAOAA,mBAGAC,QAAAC,gCAEA,IAAAC,EAAAC,mEAGAC,oBAGA,kFASAC,kBACAC,uDAKA,oCACAC,sBACAC,iCAKA,0BAEAC,OAAAC,EAAA,EAEAC,UAAA,IC7EAC,GADiBC,OAFjB,WAA0B,IAAAC,EAAAX,KAAaY,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,IAAA,WAAAC,YAAA,cAAuCH,EAAA,UAAeE,IAAA,WAAAC,YAAA,WAAAC,OAA6CC,KAAAR,EAAAS,YAAqBN,EAAA,KAAAH,EAAAU,GAAAV,EAAA,kBAAAW,GAA+C,OAAAR,EAAA,MAAgBG,YAAA,MAAAM,IAAsBC,MAAA,SAAAC,GAAyBd,EAAAe,WAAAJ,OAAuBR,EAAA,OAAYG,YAAA,SAAmBH,EAAA,OAAYa,aAAaC,KAAA,OAAAC,QAAA,SAAAC,MAAAR,EAAA,OAAAS,WAAA,gBAA0Eb,OAASc,MAAA,MAAAC,OAAA,WAA8BtB,EAAAuB,GAAA,KAAApB,EAAA,MAAyBG,YAAA,aAAwBN,EAAAU,GAAAC,EAAA,kBAAAa,EAAAC,GAA6C,OAAAtB,EAAA,MAAgBG,YAAA,SAAmBH,EAAA,QAAAH,EAAAuB,GAAAvB,EAAA0B,GAAAD,EAAA,MAAAzB,EAAAuB,GAAA,KAAApB,EAAA,QAAAH,EAAAuB,GAAAvB,EAAA0B,GAAAF,EAAAG,UAAA3B,EAAA0B,GAAAF,EAAAI,yBAA6H5B,EAAAuB,GAAA,KAAApB,EAAA,OAAyBa,aAAaC,KAAA,OAAAC,QAAA,SAAAC,OAAAnB,EAAAS,SAAAoB,OAAAT,WAAA,qBAAwFd,YAAA,oBAAgCH,EAAA,iBAAAH,EAAAuB,GAAA,KAAApB,EAAA,oBAE35B2B,oBCCjB,IAcAC,EAdAC,EAAA,OAcAC,CACAC,EACApC,GATA,EAVA,SAAAqC,GACAH,EAAA,SAaA,kBAEA,MAUAI,EAAA,QAAAL,EAAA,+CCvBO,WACL,IACMvB,EAAK6B,OAAkBC,EAAA,GAC3BC,IAAK,EACLC,YAAa,EACbC,SAAU,OAENC,EAAOJ,EAAA,EAEb,OAAOK,OAAAC,EAAA,EAAAD,CARI,qDAQMnC,EAAKkC,QAGjB,SAAuBG,GAC5B,IACMrC,EAAK6B,OAAiBC,EAAA,GAC1BO,QACAL,YAAa,EACbM,IAAK,EACLC,KAAM,SACNC,KAAM,MACNP,SAAU,OAENC,EAAOJ,EAAA,EAEb,OAAOK,OAAAC,EAAA,EAAAD,CAXK,sDAWKnC,EAAKkC","file":"static/js/5.aa072e12dbaf8874cae0.js","sourcesContent":["<template>\n    <div class=\"rank-page\" ref=\"rankPage\">\n      <!--榜单列表-->\n      <scroll class=\"top-list\" :data=\"rankList\" ref=\"rankList\">\n        <ul>\n          <li class=\"top\" v-for=\"rank in rankList\" @click=\"selectItem(rank)\">\n            <div class=\"icon\">\n              <img v-lazy=\"rank.picUrl\" width=\"100\" height=\"100\"/>\n            </div>\n            <ul class=\"song-list\">\n              <li class=\"song\" v-for=\"(song,index) in rank.songList\">\n                <span>{{index+1}}</span>\n                <span>{{song.songname}}{{song.singername}}</span>\n              </li>\n            </ul>\n          </li>\n        </ul>\n        <!--正在加载图标-->\n        <div class=\"loading-wrapper\" v-show=\"!rankList.length\">\n          <loading></loading>\n        </div>\n      </scroll>\n      <router-view></router-view>\n    </div>\n</template>\n\n<script>\n  import scroll from '../../base/scroll/scroll.vue'\n  import loading from '../../base/loading/loading.vue'\n  import {getRankList} from '../../api/rank.js'\n  import {ERR_OK} from \"../../api/config.js\"\n  import {mapMutations} from'vuex'\n  import {playListMixin} from '../../common/js/mixin'\n\n  export default {\n    mixins: [playListMixin],\n    data() {\n      return {\n        rankList: []\n      }\n    },\n    created() {\n      this.receiveRankList();\n    },\n    methods: {\n\n      //接收排行榜列表\n      receiveRankList() {\n        getRankList().then((res => {\n          if (res.code === ERR_OK) {\n            this.rankList = res.data.topList;\n          }\n          else {\n            console.log(\"请求榜单列表 error\")\n          }\n        }))\n      },\n\n      //选择一个排行榜进入排行榜详情页面\n      selectItem(top){\n        this.$router.push({\n          path:`/rank-page/${top.id}`\n        });\n        this.setRank(top)\n      },\n\n      //底部保留\n      handlePlayList(playList) {\n        const bottom = playList.length > 0 ? '60px' : '';\n        this.$refs.rankPage.style.bottom = bottom;\n        this.$refs.rankList.refresh()\n      },\n      ...mapMutations({\n        setRank:'SET_RANK'\n      })\n    },\n    components:{\n      scroll,\n      loading\n    }\n  }\n</script>\n\n<style scoped lang=\"stylus\" rel=\"stylesheet/stylus\">\n  @import \"~common/stylus/variable\"\n  @import \"~common/stylus/mixin\"\n\n  .rank-page\n    position: fixed\n    width: 100%\n    top: 88px\n    bottom: 0\n    .top-list\n      height: 100%\n      overflow: hidden\n      .top\n        display: flex\n        margin: 0 20px\n        padding-top: 20px\n        height: 100px\n        &:last-child\n          padding-bottom: 20px\n        .icon\n          flex: 0 0 100px\n          width: 100px\n          height: 100px\n        .song-list\n          flex: 1\n          display: flex\n          flex-direction: column\n          justify-content: center\n          padding: 0 20px\n          height: 100px\n          overflow: hidden\n          background: $color-highlight-background\n          color: $color-text-d\n          font-size: $font-size-small\n          .song\n            no-wrap()\n            line-height: 26px\n      .loading-wrapper\n        position: absolute\n        width: 100%\n        top: 50%\n        transform: translateY(-50%)\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/rank-page/rank-page.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"rankPage\",staticClass:\"rank-page\"},[_c('scroll',{ref:\"rankList\",staticClass:\"top-list\",attrs:{\"data\":_vm.rankList}},[_c('ul',_vm._l((_vm.rankList),function(rank){return _c('li',{staticClass:\"top\",on:{\"click\":function($event){_vm.selectItem(rank)}}},[_c('div',{staticClass:\"icon\"},[_c('img',{directives:[{name:\"lazy\",rawName:\"v-lazy\",value:(rank.picUrl),expression:\"rank.picUrl\"}],attrs:{\"width\":\"100\",\"height\":\"100\"}})]),_vm._v(\" \"),_c('ul',{staticClass:\"song-list\"},_vm._l((rank.songList),function(song,index){return _c('li',{staticClass:\"song\"},[_c('span',[_vm._v(_vm._s(index+1))]),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(song.songname)+_vm._s(song.singername))])])}))])})),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.rankList.length),expression:\"!rankList.length\"}],staticClass:\"loading-wrapper\"},[_c('loading')],1)]),_vm._v(\" \"),_c('router-view')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-d8ef7a24\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/rank-page/rank-page.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-d8ef7a24\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./rank-page.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./rank-page.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./rank-page.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-d8ef7a24\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./rank-page.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-d8ef7a24\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/rank-page/rank-page.vue\n// module id = null\n// module chunks = ","import {jsonp} from '../common/js/jsonp.js'\nimport {commonParams, commonOption} from './config.js'\n\nexport function getRankList() {\n  const url ='https://c.y.qq.com/v8/fcg-bin/fcg_myqq_toplist.fcg';\n  const data=Object.assign({}, commonParams,{\n    uin: 0,\n    needNewCode: 1,\n    platform: 'h5'\n  });\n  const option=commonOption;\n\n  return jsonp(url,data,option);\n}\n\nexport function getRankDetail(topid) {\n  const url = 'https://c.y.qq.com/v8/fcg-bin/fcg_v8_toplist_cp.fcg';\n  const data=Object.assign({},commonParams,{\n    topid,\n    needNewCode: 1,\n    tpl: 3,\n    page: 'detail',\n    type: 'top',\n    platform: 'h5'\n  });\n  const option=commonOption;\n\n  return jsonp(url,data,option);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/rank.js"],"sourceRoot":""}